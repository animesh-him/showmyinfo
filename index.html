<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>What a website can see about you</title>

<!-- Tiny 1√ó1 transparent favicon ‚Äì removes the 404 warning -->
<link rel="icon"
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/5+BAQAE/wMn2TLrJQAAAABJRU5ErkJggg==">

<style>
  body{
    font-family:system-ui,Arial,sans-serif;
    margin:40px auto 20px auto;          /* start a little below the top */
    max-width:960px;
    line-height:1.4;
    font-size:10px;                      /* tiny ‚Äì fits on one screen */
    color:#111;
  }
  h1{
    font-size:1.6rem;
    margin-bottom:0.6rem;
  }
  button{
    font-size:1.1rem;
    padding:0.6rem 1.2rem;
    cursor:pointer;
    margin-bottom:0.5rem;
  }
  #status{
    margin-left:0.8rem;
    color:#c00;
    font-size:0.9rem;
  }
  table{
    width:100%;
    border-collapse:collapse;
    table-layout:fixed;
  }
  th, td{
    border:1px solid #bbb;
    padding:4px 6px;
    vertical-align:top;
    word-break:break-word;
  }
  th{
    background:#f3f3f3;
    font-family:"cursive","Comic Sans MS",cursive;
    font-weight:bold;
  }
  .credit{
    margin-top:1rem;
    font-size:0.85rem;
    text-align:center;
    color:#555;
  }
</style>
</head>

<body>

<h1>üîé What a website can see about you (single‚Äëclick)</h1>

<button id="revealBtn">Show my public info</button><span id="status"></span>

<table id="infoTable">
  <thead>
    <tr>
      <th>Exposed information</th>
      <th>Current value</th>
      <th>What it reveals</th>
      <th>Mitigation tip</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<p class="credit">
  Created by <strong>Animesh</strong>. 
  <a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="noopener">Apache License‚ÄØ2.0</a>.
</p>

<script>
/* -------------------------------------------------------------
   Tiny status helper
   ------------------------------------------------------------- */
function setStatus(text, isError = false) {
  const el = document.getElementById('status');
  el.textContent = text;
  el.style.color = isError ? '#c00' : '#080';
}

/* -------------------------------------------------------------
   Fetch public IP (primary + fallback)
   ------------------------------------------------------------- */
async function fetchPublicIP() {
  const services = [
    'https://api.ipify.org?format=json',
    'https://ifconfig.me/ip'               // plain‚Äëtext fallback
  ];
  for (const url of services) {
    try {
      const r = await fetch(url, {cache: 'no-store'});
      if (!r.ok) throw new Error(`HTTP ${r.status}`);
      if (url.includes('json')) {
        const {ip} = await r.json(); return ip;
      }
      return (await r.text()).trim();
    } catch (e) {
      console.warn('IP fetch failed', url, e);
    }
  }
  return 'unavailable';
}

/* -------------------------------------------------------------
   WebGL fingerprint (vendor / renderer)
   ------------------------------------------------------------- */
function getWebGL() {
  try {
    const canvas = document.createElement('canvas');
    const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
    if (!gl) return 'no WebGL';
    const ext = gl.getExtension('WEBGL_debug_renderer_info');
    const vendor = gl.getParameter(ext?.UNMASKED_VENDOR_WEBGL) || 'unknown';
    const renderer = gl.getParameter(ext?.UNMASKED_RENDERER_WEBGL) || 'unknown';
    return `${vendor} / ${renderer}`;
  } catch (e) {
    return `error (${e.message})`;
  }
}

/* -------------------------------------------------------------
   Simple canvas hash (another fingerprint vector)
   ------------------------------------------------------------- */
function getCanvasHash() {
  try {
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    ctx.textBaseline = 'top';
    ctx.font = '14px "Arial"';
    ctx.fillStyle = '#f60';
    ctx.fillRect(125, 1, 62, 20);
    ctx.fillStyle = '#069';
    ctx.fillText('CanvasFingerprint', 2, 15);
    const data = canvas.toDataURL();
    let hash = 0;
    for (let i = 0; i < data.length; i++) hash = ((hash << 5) - hash) + data.charCodeAt(i);
    return ('00000000' + (hash >>> 0).toString(16)).slice(-8);
  } catch (e) {
    return `error (${e.message})`;
  }
}

/* -------------------------------------------------------------
   Main collector ‚Äì returns an object with value/why/fix for each field
   ------------------------------------------------------------- */
async function collectInfo() {
  const now = new Date();

  const out = {
    // ---------- Browser basics ----------
    'User‚ÄëAgent': {
      value: navigator.userAgent,
      why: 'Exact browser, version and OS ‚Äì lets a site serve targeted exploits.',
      fix: 'Keep the browser updated; use a privacy‚Äëfocused browser or an extension that spoofs/truncates the UA string.'
    },
    'User‚ÄëAgent Client Hints': {
      value: (navigator.userAgentData && navigator.userAgentData.brands)
        ? navigator.userAgentData.brands.map(b => `${b.brandb.version}`).join(', ')
        : 'not supported',
      why: 'Structured UA data that can be combined for fingerprinting.',
      fix: 'Prefer browsers that hide or randomise client‚Äëhint values (Tor, Brave with strict settings).'
    },
    Platform: {
      value: navigator.platform,
      why: 'Operating‚Äësystem fingerprint (Win32, MacIntel, Linux‚Ä¶).',
      fix: 'Same as User‚ÄëAgent ‚Äì keep OS patched; consider extensions that hide or randomise the value.'
    },
    Language: {
      value: navigator.language,
      why: 'Preferred UI language; combined with IP it can hint at location/ethnicity.',
      fix: 'Set a generic language (e.g., ‚Äúen‚ÄëUS‚Äù) or use a privacy extension that randomises language headers.'
    },
    'Languages (list)': {
      value: navigator.languages.join(', '),
      why: 'Array of language preferences ‚Äì same privacy impact as the single Language field.',
      fix: 'Same as Language.'
    },
    'Cookies enabled': {
      value: navigator.cookieEnabled,
      why: 'Tells if third‚Äëparty cookies are allowed ‚Äì used for persistent tracking IDs.',
      fix: 'Block third‚Äëparty cookies in the browser settings; add a tracker‚Äëblocking extension.'
    },
    'Do‚ÄëNot‚ÄëTrack': {
      value: navigator.doNotTrack,
      why: 'Signal that you do not want to be tracked (many sites ignore it).',
      fix: 'Enable Do‚ÄëNot‚ÄëTrack and use an extension that actively blocks known trackers.'
    },

    // ---------- Screen / display ----------
    'Screen width': {
      value: screen.width,
      why: 'Resolution ‚Äì classic fingerprint data.',
      fix: 'Use a privacy‚Äëoriented browser/extension that reports a common resolution (e.g., 1024‚ÄØ√ó‚ÄØ768).'
    },
    'Screen height': {
      value: screen.height,
      why: 'Same fingerprint relevance as width.',
      fix: 'Same as Screen width.'
    },
    'Color depth': {
      value: screen.colorDepth,
      why: 'Usually 24‚Äë or 30‚Äëbit ‚Äì a small extra identifier.',
      fix: 'Usually not critical; you can spoof it with privacy extensions if desired.'
    },
    'Pixel depth': {
      value: screen.pixelDepth,
      why: 'Same as colour depth.',
      fix: 'Same as Colour depth.'
    },
    'Device‚Äëpixel‚Äëratio': {
      value: window.devicePixelRatio,
      why: 'Distinguishes high‚ÄëDPI (Retina) displays from low‚ÄëDPI screens.',
      fix: 'Spoof or round the value with a privacy extension.'
    },

    // ---------- Hardware hints ----------
    'CPU cores (hardwareConcurrency)': {
      value: navigator.hardwareConcurrency,   // <-- fixed colon
      why: 'Number of logical CPU cores ‚Äì reveals device class.',
      fix: 'Some extensions let you report a lower value (e.g., 2 cores).'
    },
    'Device memory (GB)': {
      value: navigator.deviceMemory ?? 'unavailable',
      why: 'Approximate RAM size ‚Äì further refines fingerprint.',
      fix: 'Hide or report a generic value via extensions or use a browser that omits it.'
    },

    // ---------- Time / locale ----------
    'Timezone offset (minutes)': {
      value: now.getTimezoneOffset(),
      why: 'Local UTC offset ‚Äì can combine with IP to locate the user.',
      fix: 'Force UTC (offset‚ÄØ=‚ÄØ0) with a privacy extension or use a VPN that also adjusts system clock.'
    },
    'Locale‚Äëaware date string': {
      value: now.toLocaleString(),
      why: 'Formatted date/time strings leak regional formatting preferences.',
      fix: "Set a generic locale or use an extension that rewrites 'Intl' objects."
    },
    'IANA time‚Äëzone': {
      value: Intl.DateTimeFormat().resolvedOptions().timeZone,
      why: 'Explicit time‚Äëzone identifier (e.g., America/New_York).',
      fix: 'Force UTC or use a privacy extension that masks the value.'
    },

    // ---------- Network / IP ----------
    'Public IP address': {
      value: await fetchPublicIP(),
      why: 'Strongest identifier ‚Äì reveals ISP, rough location, and can tie to other accounts.',
      fix: 'Browse through a reputable VPN, Tor, or proxy. Enable IPv6 privacy extensions on the OS.'
    },

    // ---------- GPU / graphics ----------
    'WebGL fingerprint': {
      value: getWebGL(),
      why: 'GPU vendor & renderer strings are often unique per device ‚Äì highly distinguishing.',
      fix: 'Block or spoof WebGL via extensions (CanvasBlocker, Trace) or disable WebGL in browser flags.'
    },
    'Canvas fingerprint (hash)': {
      value: getCanvasHash(),
      why: 'Canvas rendering differs slightly between devices ‚Äì another fingerprint source.',
      fix: 'Use a canvas‚Äëblocking or spoofing extension, or enable ‚Äúcanvas fingerprint protection‚Äù in privacy‚Äëfocused browsers.'
    },

    // ---------- Battery (HTTPS only) ----------
    Battery: {
      value: null,   // will be filled later if the API exists
      why: 'Battery level & charging state can act as a slowly‚Äëchanging fingerprint.',
      fix: 'Most browsers hide this on insecure origins. You can also disable the Battery API in settings or via extensions.'
    },

    // ---------- Persistent storage ----------
    'Persistent storage granted?': {
      value: null,
      why: 'If a site has persistent storage it can keep data forever ‚Äì a stronger fingerprint.',
      fix: 'Revoke persistent permission in browser settings or use a privacy extension that blocks it.'
    },

    // ---------- Touch & input ----------
    'Touch points': {
      value: navigator.maxTouchPoints || 0,
      why: 'Presence of a touchscreen ‚Äì helps differentiate mobile vs. desktop.',
      fix: 'Usually low risk; if you wish, spoof the value with a privacy extension.'
    },

    // ---------- Media devices ----------
    'Media devices (cameras, microphones, speakers)': {
      value: null,
      why: 'List of available input/output devices (labels hidden until permission is granted). Reveals hardware capability.',
      fix: 'Block `navigator.mediaDevices.enumerateDevices` via a privacy extension or simply deny permission prompts.'
    },

    // ---------- Network information ----------
    'Network effective type': {
      value: navigator.connection?.effectiveType ?? 'unavailable',
      why: 'Shows if the connection is ‚Äú4g‚Äù, ‚Äú3g‚Äù, etc.; can hint at device type or location.',
      fix: 'Use a privacy extension that masks or randomises the Network Information API.'
    },
    'Network downlink (Mbps)': {
      value: navigator.connection?.downlink ?? 'unavailable',
      why: 'Approximate bandwidth ‚Äì another subtle fingerprint.',
      fix: 'Same as above ‚Äì mask or randomise the values if you care about fingerprinting.'
    },
    'Network round‚Äëtrip time (ms)': {
      value: navigator.connection?.rtt ?? 'unavailable',
      why: 'Measures latency; combined with other data it can improve a fingerprint.',
      fix: 'Masking works the same way as the other NetworkInfo fields.'
    },

    // ---------- Storage estimate ----------
    'Storage estimate (used / quota in GB)': {
      value: 'pending',
      why: 'Provides an idea of how much local storage you have; can be used for fingerprinting.',
      fix: 'Most browsers do not expose exact numbers to third‚Äëparty sites without permission. If they do, you can use a privacy extension to hide or fuzz the values.'
    }
  };

  /* ----- Optional async pieces ----------------------------------- */
  // Battery API
  if (navigator.getBattery) {
    try {
      const bat = await navigator.getBattery();
      out.Battery.value = `charging:${bat.charging} level:${bat.level}`;
    } catch {
      out.Battery.value = 'unavailable';
    }
  }

  // Persistent storage status
  if (navigator.storage?.persisted) {
    try {
      const pers = await navigator.storage.persisted();
      out['Persistent storage granted?'].value = pers ? 'yes' : 'no';
    } catch {
      out['Persistent storage granted?'].value = 'error';
    }
  }

  // Media devices
  if (navigator.mediaDevices?.enumerateDevices) {
    try {
      const devs = await navigator.mediaDevices.enumerateDevices();
      out['Media devices (cameras, microphones, speakers)'].value =
        devs.map(d => d.kind).join(', ') || 'none';
    } catch {
      out['Media devices (cameras, microphones, speakers)'].value = 'unavailable';
    }
  }

  // Storage estimate
  if (navigator.storage?.estimate) {
    try {
      const est = await navigator.storage.estimate();
      const used  = (est.usage  ?? 0) / (1024 ** 3);
      const quota = (est.quota  ?? 0) / (1024 ** 3);
      out['Storage estimate (used / quota in GB)'].value =
        `${used.toFixed(2)}‚ÄØGB / ${quota.toFixed(2)}‚ÄØGB`;
    } catch {
      out['Storage estimate (used / quota in GB)'].value = 'unavailable';
    }
  }

  return out;
}

/* -------------------------------------------------------------
   Rendering ---------------------------------------------------
   ------------------------------------------------------------- */
async function renderTable() {
  const tbody = document.querySelector('#infoTable tbody');
  tbody.innerHTML = '';                     // clear previous run
  setStatus('collecting‚Ä¶', false);

  try {
    const data = await collectInfo();

    for (const [name, info] of Object.entries(data)) {
      const tr = document.createElement('tr');

      const tdName = document.createElement('td');
      tdName.textContent = name;
      tr.appendChild(tdName);

      const tdVal = document.createElement('td');
      tdVal.textContent = info.value ?? 'N/A';
      tr.appendChild(tdVal);

      const tdWhy = document.createElement('td');
      tdWhy.textContent = info.why;
      tr.appendChild(tdWhy);

      const tdFix = document.createElement('td');
      tdFix.textContent = info.fix;
      tr.appendChild(tdFix);

      tbody.appendChild(tr);
    }
    setStatus('done', false);
  } catch (e) {
    console.error('collection error', e);
    setStatus('error ‚Äì see console', true);
  }
}

/* -------------------------------------------------------------
   Hook up the button ‚Äì pointerdown works for mouse & touch
   ------------------------------------------------------------- */
document.getElementById('revealBtn')
        .addEventListener('pointerdown', () => {
  // Prevent double‚Äëtap building multiple tables
  if (document.querySelector('#infoTable tbody').children.length === 0) {
    renderTable();
  }
});
</script>

</body>
</html>
